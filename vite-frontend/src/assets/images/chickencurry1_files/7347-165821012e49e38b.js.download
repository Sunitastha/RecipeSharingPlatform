!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="3572e3d3-1211-43ae-98f9-fe7cbe35a212",e._sentryDebugIdIdentifier="sentry-dbid-3572e3d3-1211-43ae-98f9-fe7cbe35a212")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7347],{27481:function(e,t,n){n.d(t,{A:function(){return r},T:function(){return o}});var s=n(97458),a=n(52983),l=n(7934);let i=(0,a.createContext)({result:null,steps:null,plan:null,isPending:!1,mediaItems:[],response:null,isFailed:!1,isReadonly:!1,inFlight:!1,idx:null,isCopilot:!1,filteredMediaItems:[],isLastResult:!1,isFirstResult:!1,hasAnswer:!1,hasSteps:!1,isFinalStep:!1,isSnapshotRender:!1}),r=e=>{let{children:t,result:n,response:r,isReadonly:o,idx:c,inFlight:u,isPending:d,hasSteps:m,isFinalStep:h,isCopilot:p,mediaItems:v,filteredMediaItems:x,isFailed:f,isSnapshotRender:b,isLastResult:k}=e,y=(0,a.useMemo)(()=>n?(0,l.c)(n.text):[],[n]),j=(0,a.useMemo)(()=>{var e;return null!==(e=null==n?void 0:n.plan)&&void 0!==e?e:null},[n]),g=!!(null==r?void 0:r.answer);return(0,s.jsx)(i.Provider,{value:{isPending:d,hasSteps:m,isFinalStep:h,isCopilot:p,mediaItems:v,filteredMediaItems:x,isFailed:f,steps:y,plan:j,result:n,response:r,isReadonly:o,inFlight:u,idx:c,hasAnswer:g,isSnapshotRender:b,isFirstResult:0===c,isLastResult:k},children:t})},o=()=>{let e=(0,a.useContext)(i);if(!e)throw Error("useThreadEntry must be used within ThreadEntryProvider");return e}},46061:function(e,t,n){n.d(t,{a:function(){return l}});var s=n(97458),a=n(3011);let l=()=>(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsxs)("div",{className:"flex gap-sm",children:[(0,s.jsx)(a.ZP,{variant:"offset",className:"h-[22px] w-[22px] rounded-full"}),(0,s.jsx)(a.ZP,{variant:"offset",className:"h-[22px] w-[80px] rounded-full"})]}),(0,s.jsx)(a.ZP,{variant:"offset",className:"mt-md h-[80px] rounded-md"})]})},85950:function(e,t,n){var s=n(97458),a=n(52983),l=n(40906),i=n(29658),r=n(44239),o=n(72157);t.Z=e=>{let{shareHref:t,hasMounted:n,isSharable:c,...u}=e,{trackEvent:d}=(0,l.h)(),m=(0,a.useCallback)(()=>{navigator.clipboard.writeText(n?(0,r.RP)(decodeURIComponent(t)):""),d("click copy link button",{})},[t,n,d]);return c?(0,s.jsx)(o.Z,{clickFeedback:!0,size:"small",onClick:m,toolTip:"Copy Link",tooltipLayout:"bottom",icon:i.nN,variant:"primary",...u}):null}},27810:function(e,t,n){var s=n(97458),a=n(52983),l=n(1804),i=n(85950),r=n(71870),o=n(47609),c=n(37983),u=n(72157);t.Z=e=>{let{isSharable:t,hasMounted:n,shareHref:d,EditorDropDownContent:m,icon:h,onClick:p}=e,{isMobileStyle:v}=(0,r.d)(),{isMacOS:x}=(0,o.Fy)(),[f,b]=(0,a.useState)(!1),k=(0,l.useTranslations)("shared"),y=(0,a.useCallback)(()=>{null==p||p(),b(e=>!e)},[p,b]),j=(0,a.useCallback)(e=>{(x?e.metaKey&&e.shiftKey&&"c"===e.key:e.ctrlKey&&e.shiftKey&&"c"===e.key)&&(e.preventDefault(),y())},[x,y]);return((0,a.useEffect)(()=>(document.addEventListener("keydown",j),()=>{document.removeEventListener("keydown",j)}),[j]),n)?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex items-center gap-x-sm",children:[!v&&(0,s.jsx)(i.Z,{shareHref:d,hasMounted:n,isSharable:t}),(0,s.jsx)(c.p,{content:m,placement:"bottom-end",isMobileStyle:v,onClose:()=>b(!1),isOpen:f,children:(0,s.jsx)(u.Z,{onClick:y,variant:v?"common":"primary",size:"small",text:v?void 0:k("share"),icon:h})})]})}):null}},32607:function(e,t,n){var s=n(97458),a=n(64194),l=n(52983),i=n(1804),r=n(40906),o=n(55524),c=n(91007),u=n(75421),d=n(44835),m=n(29658),h=n(44239),p=n(28023),v=n(72157);t.Z=e=>{let{descriptionText:t,shareHref:n,isSharable:x,hasMounted:f,icon:b}=e,k=encodeURIComponent(t),{trackEvent:y}=(0,r.h)(),j=(0,i.useTranslations)("socialShare"),g=(0,i.useTranslations)("shared"),C=(0,l.useMemo)(()=>"https://twitter.com/intent/tweet?text=".concat(k,"&url=").concat(n),[k,n]),w=(0,l.useMemo)(()=>"https://api.whatsapp.com/send?text=".concat(k,"%20").concat(n),[k,n]),N=(0,l.useMemo)(()=>"https://www.facebook.com/sharer/sharer.php?u=".concat(n,"&quote=").concat(k),[k,n]),Z=(0,l.useCallback)(()=>{document.hasFocus&&(navigator.clipboard.writeText(f?(0,h.RP)(decodeURIComponent(n)):""),y("click copy link button",{}))},[n,f,y]),E=(0,l.useCallback)(()=>{var e;if(!(null===(e=navigator)||void 0===e?void 0:e.share)){window.open(C,"_blank");return}navigator.share({text:"".concat(t," ").concat(f?(0,h.RP)(decodeURIComponent(n)):""),title:"Perplexity AI"}),y("click mobile native share button",{})},[n,C,t,f,y]),S=[{text:"Twitter",icon:u.NC,target:"_blank",href:C,onClick:()=>y("click tweet button",{})},{text:j("copyLink"),clickFeedback:!0,icon:m.nN,onClick:Z},{text:"WhatsApp",icon:c.VH,target:"_blank",href:w,onClick:()=>y("click whatsapp button",{})},{text:"Facebook",icon:o.ne,target:"_blank",href:N,onClick:()=>y("click facebook button",{})}];return((0,l.useEffect)(()=>{f&&x&&Z()},[f,x,Z]),f&&x)?(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"mt-sm",children:(0,s.jsxs)(p.Z,{variant:"tiny",color:"super",children:[(0,s.jsx)(a.G,{icon:d.E9,className:"mr-xs"}),(0,s.jsx)("span",{children:j("linkCopied")})]})}),(0,s.jsxs)("div",{className:"hidden md:block",children:[(0,s.jsx)(p.Z,{variant:"baseSemi",className:"mb-sm mt-md",children:g("share")}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-xs",children:S.map(e=>(0,s.jsx)("div",{children:(0,s.jsx)(v.Z,{layout:"left",size:"small",fullWidth:!0,...e})},e.text))})]}),(0,s.jsx)("div",{className:"block md:hidden",children:(0,s.jsx)("div",{className:"mt-md",children:(0,s.jsx)(v.Z,{variant:"primary",fullWidth:!0,text:g("share"),target:"_blank",icon:b,onClick:E})})})]}):null}},34817:function(e,t,n){var s=n(97458),a=n(82129),l=n(76961),i=n(52983),r=n(1804),o=n(31237),c=n(50882),u=n(71870),d=n(73297),m=n(72157),h=n(28023),p=n(3011),v=n(99577);t.Z=e=>{var t,n,x;let{showAvatar:f,showCreatorLabel:b,showEdit:k,isCurrentUser:y=!0,textColor:j,textVariant:g="smallBold",username:C,image:w,anon:N,avatarSize:Z="small"}=e,{data:E,update:S}=(0,l.useSession)(),[_,P]=i.useState(!1),[T,R]=i.useState(null!=C?C:y?null==E?void 0:null===(t=E.user)||void 0===t?void 0:t.username:"Anonymous"),[F,I]=i.useState(),{isMobileUserAgent:A}=(0,u.d)(),M=(0,r.useTranslations)("settings.account"),D=async()=>fetch("/api/user",{method:"PUT",body:JSON.stringify({username:T})}),{mutate:z,isLoading:U}=(0,a.D)(D,{onSuccess:e=>{e.json().then(t=>{if(200!==e.status){I(t.message);return}P(!1),I(void 0),S()})}});(0,i.useEffect)(()=>{var e;R(null!=C?C:y?null==E?void 0:null===(e=E.user)||void 0===e?void 0:e.username:"Anonymous")},[C,y,null==E?void 0:null===(n=E.user)||void 0===n?void 0:n.username]);let L="@perplexity-bot@"===T;return(0,s.jsxs)("div",{className:"relative flex items-center gap-x-xs",children:[f&&(0,s.jsx)(o.Z,{size:Z,anon:N,user:L?"/static/images/bot.png":null!=w?w:y&&null!==(x=null==E?void 0:E.user.image)&&void 0!==x?x:void 0}),_?(0,s.jsx)("div",{children:(0,s.jsx)(d.ZP,{isMobileUserAgent:A,value:T,disabled:U,errorText:null!=F?F:""===T?"Username cannot be empty":"",onChange:e=>{R(e.target.value)},className:"md:min-w-[300px]",inlineEditBlock:E&&(0,s.jsxs)("div",{className:"ml-sm flex items-center gap-x-xs",children:[(0,s.jsx)(m.Z,{text:M("save"),variant:T===E.user.username||""===T||U?"common":"primary",size:"small",disabled:T===E.user.username||""===T||U,onClick:()=>z()}),(0,s.jsx)(m.Z,{text:M("cancel"),size:"small",disabled:U,onClick:()=>{R(E.user.username),P(!1)}})]})})}):(0,s.jsx)(h.Z,{variant:g,color:j,className:"break-all line-clamp-1",children:N?"Anonymous":L?"Perplexity Bot":T}),b&&(0,s.jsx)(p.ZP,{variant:"offset",className:"rounded-full px-sm py-xs",children:(0,s.jsx)(h.Z,{variant:"tiny",color:"light",children:"Author"})}),k&&!_&&(0,s.jsx)(v.Z,{pill:!0,size:"small",icon:c.faPenToSquare,onClick:()=>P(!0)})]})}},85570:function(e,t,n){var s=n(97458),a=n(52983);class l extends a.Component{static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.log({error:e,errorInfo:t})}render(){if(this.state.hasError){var e;return(null===(e=this.props)||void 0===e?void 0:e.fallback)?this.props.fallback:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:"Oops, there is an error!"}),(0,s.jsx)("button",{type:"button",onClick:()=>this.setState({hasError:!1}),children:"Try again?"})]})}return this.props.children}constructor(e){super(e),this.state={hasError:!1}}}t.Z=l},89469:function(e,t,n){n.d(t,{p:function(){return i}});var s=n(68201),a=n(84599),l=n(52460);function i(){let e=(0,l.f)(),{thread:t}=(0,s.a0)();return e?(0,a.$)(t):void 0}},43334:function(e,t,n){n.d(t,{O:function(){return l}});var s=n(52983),a=n(72898);function l(){let e=(0,a.nO)(),[t,n]=(0,s.useState)(!1);return(0,s.useCallback)((s,a,l,i)=>{e&&!t&&(n(!0),e.emit("update_thread_access",s,a,{read_write_token:l},e=>{n(!1),(null==e?void 0:e.access)!=null&&(null==i||i(null==e?void 0:e.access))}))},[t,e])}},26610:function(e,t,n){n.d(t,{X:function(){return a}});var s=n(1893);function a(){let{"pplx-show-survey":e}=(0,s.useRouter)().query;return"edu"===e||"plus"===e||"default"===e||"copilot"===e?e:null}}}]);