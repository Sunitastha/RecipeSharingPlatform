!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="2f928dab-38bb-470d-84bf-2f0b61563455",e._sentryDebugIdIdentifier="sentry-dbid-2f928dab-38bb-470d-84bf-2f0b61563455")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5304],{71807:function(e,t,l){l.d(t,{D:function(){return d}});var n=l(97458),s=l(52983);let o=(e,t,l)=>{(0,s.useEffect)(()=>{let n=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&t()})},l),s=e.current;return s&&n.observe(s),()=>{s&&n.unobserve(s)}},[e,t,l])};var r=l(3011),a=l(69208),i=l(77837),c=l.n(i);let d=e=>{let{children:t,fetchNextPage:l,hasNextPage:i,showLoadingState:d,itemsToRender:u}=e,m=(0,s.useRef)(l);m.current=l;let h=(0,s.useRef)(c()(()=>m.current(),300)),x=(0,s.useRef)(null);return o(x,h.current,{rootMargin:"50px",threshold:0}),(0,n.jsxs)(n.Fragment,{children:[t,d&&(0==u.length?(0,n.jsx)(r.ZP,{className:"py-sm",children:(0,n.jsx)(a.Z,{animateLines:!1,blockCount:12,divider:!0})}):(0,n.jsx)(r.ZP,{className:"py-md",children:(0,n.jsx)(a.Z,{animateLines:!1,blockCount:1})})),u.length>0&&i&&(0,n.jsx)("div",{ref:x,className:"border border-transparent"})]})}},44215:function(e,t,l){l.d(t,{W:function(){return i}});var n=l(97458),s=l(64194),o=l(52983),r=l(28023),a=l(44239);let i=o.memo(e=>(0,n.jsxs)("div",{className:"flex items-center  gap-x-xs",children:[(0,n.jsx)(r.Z,{variant:"tiny",color:"light",children:(0,n.jsx)(s.G,{size:"sm",icon:e.icon})}),(0,n.jsx)(r.Z,{variant:"tiny",color:"light",children:(0,a.uf)(e.count)})]}),(e,t)=>e.count===t.count&&e.icon===t.icon)},73565:function(e,t,l){var n=l(97458),s=l(52983),o=l(1804),r=l(57247),a=l(10785),i=l(80937),c=l(4028),d=l(33326),u=l(61904),m=l(71870),h=l(43119),x=l(99577),g=l(11389);t.Z=e=>{let{show:t,onDelete:l,onAddToCollection:f,onSwapCollection:v,onRemoveFromCollection:p,currentCollection:j,rwToken:y,type:b}=e,{isMobileStyle:w}=(0,m.d)(),C=null!==y,N=C&&(b===r.W.LIBRARY||b===r.W.SEARCH)&&null==j&&null!=f,[A,I]=(0,s.useState)(!1),k=(0,o.useTranslations)("threadItem"),Z=(0,o.useTranslations)("shared");if(!t)return null;let T=[{icon:i.r8,text:Z("addToCollection"),show:N,onClick:f,testId:"thread-add-to-collection"},{icon:c.a_,text:Z("swapCollections"),show:C&&null!=j&&null!=v,onClick:v,testId:"thread-swap-collection"},{icon:u.faXmark,text:Z("removeFromCollection"),show:C&&null!=p&&null!=j,onClick:p,testId:"thread-remove-from-collection"},{icon:d.$,text:k("deleteThread"),show:C&&null!=l,onClick:()=>I(!0),testId:"thread-delete"}];return(null==T?void 0:T.every(e=>!e.show))?null:(0,n.jsxs)("div",{children:[(0,n.jsx)(h.G,{items:T,isMobileStyle:w,children:(0,n.jsx)(x.Z,{testId:"thread-dropdown-menu",size:"small",icon:a.faEllipsis})}),(0,n.jsx)(g.Z,{isOpen:A,onClose:()=>I(!1),message:k("deleteThreadConfirmation"),actionList:[{text:Z("nevermind"),onClick:()=>I(!1)},{text:Z("confirm"),variant:"rejected",onClick:l}]})]})}},57247:function(e,t,l){l.d(t,{W:function(){return s},B:function(){return W}});var n,s,o=l(97458),r=l(52983),a=l(1804),i=l(69153),c=l.n(i),d=l(6814),u=l(61218),m=l(10478);let h=e=>{let{collections:t}=(0,m.l)();if(!e)return null;let l=null==t?void 0:t.find(t=>t.uuid===e);return null!=l?l:null};var x=l(69914),g=l(88682),f=l(33979),v=l(20667),p=l(49551),j=l(31237),y=l(73565),b=l(57393),w=l.n(b);let C=r.memo(e=>{let{type:t,featuredImage:l,title:n,href:r}=e;return l&&t===s.DISCOVER?(0,o.jsx)(c(),{href:r,children:(0,o.jsx)("div",{className:"relative h-24 w-24 flex-none overflow-hidden rounded-md",children:l.includes("images.unsplash.com")?(0,o.jsx)("img",{src:l,alt:n,className:"h-24 w-24 rounded-md object-cover"}):(0,o.jsx)(w(),{src:l,alt:n,sizes:"33vw",fill:!0,priority:!0,style:{objectFit:"cover"}})})}):null});var N=l(44108),A=l(20634),I=l(44215),k=l(51253),Z=l(49544),T=l(56425);let D=r.memo(e=>{var t,l;let{threadAccess:n,socialInfo:s}=e;if(!n||!s||n<T.uv.PUBLIC_READ)return null;let r=null!==(t=s.view_count)&&void 0!==t?t:0,a=null!==(l=s.fork_count)&&void 0!==l?l:0;return(0,o.jsxs)(o.Fragment,{children:[r>0&&(0,o.jsx)(I.W,{icon:Z.Md,count:r}),a>0&&(0,o.jsx)(I.W,{icon:k.MD,count:a})]})});var R=l(34957),E=l(71263);let L=r.memo(e=>{let{threadCount:t,threadAccess:l,lastUpdated:n,socialInfo:s,assistant:r}=e,a=(0,A.k)();return(0,o.jsxs)("div",{className:"flex items-center gap-x-md",children:[!!t&&t>1&&(0,o.jsx)(I.W,{icon:R.Oq,count:t}),(0,o.jsx)(D,{socialInfo:s,threadAccess:l}),(0,o.jsx)(E.Z,{timestamp:n,translations:a}),(0,o.jsx)(N.Z,{textColor:"light",textVariant:"tiny",assistant:r})]})});var S=l(80937),P=l(3011),_=l(28023),U=l(99577);let O=e=>{let{title:t,preview:l,threadCount:n,lastUpdated:i,href:b="/",rwToken:w,assistant:N,socialInfo:A,showActionMenu:I=!0,authorImage:k,threadAccess:Z,type:T,featuredImage:D,entryUUID:R,collection:E}=e,O=h(null==E?void 0:E.uuid),{openModal:M}=(0,f.X)(),{collections:z}=(0,m.l)(),{searchTerm:W}=(0,v.p)(),{deleteThread:F}=(0,x.l)(),{removeThreadFromCollection:B}=(0,u.Fb)(),G=(0,d.useRouter)(),{trackEvent:q}=(0,g.WS)(),H=(0,a.useTranslations)("shared"),V=(0,r.useCallback)(e=>{let{entryUUID:t}=e;0===z.length?M("collectionCreateOrEdit",{existingCollection:O,frontendContextUUID:void 0,searchTerm:W}):M("collectionSelectModal",{entryUUID:t,userCollections:z,currentCollection:O,searchTerm:W})},[O,z,M,W]),X=(0,r.useCallback)(async e=>{F({entryUUID:e,collectionSlug:null==O?void 0:O.slug}),q("delete thread from history click",{entryUUID:e})},[null==O?void 0:O.slug,F,q]);return(0,o.jsxs)(P.ZP,{className:"flex items-center gap-x-md py-md md:px-0",children:[(0,o.jsx)(C,{featuredImage:D,type:T,title:t,href:b}),(0,o.jsxs)("div",{className:"w-full grow",children:[(0,o.jsx)(c(),{href:b,className:"group block",children:(0,o.jsxs)(P.ZP,{className:"",children:[(0,o.jsxs)("div",{className:"flex items-center gap-x-md",children:[(0,o.jsx)(_.Z,{className:"grow",variant:"baseSemi",children:(0,o.jsx)("div",{"data-testid":"thread-title",className:"break-all transition duration-300 line-clamp-1 md:group-hover:text-super md:dark:group-hover:text-superDark",children:t})}),null!=k&&(0,o.jsx)(j.Z,{size:"small",user:k})]}),(0,o.jsx)(_.Z,{color:"light",className:"break-word text-balance mt-two line-clamp-2",children:l})]})}),(0,o.jsx)("div",{className:I?"mt-xs":"mt-sm",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)(L,{threadCount:n,threadAccess:Z,lastUpdated:i,socialInfo:A,assistant:N}),(0,o.jsxs)("div",{className:"flex items-center gap-x-xs",children:[(null==E?void 0:E.title)&&T===s.LIBRARY&&(0,o.jsx)(c(),{href:"/collections/".concat(null==E?void 0:E.slug),className:"block",children:(0,o.jsx)(P.ZP,{className:"rounded-full border px-xs",children:(0,o.jsxs)(_.Z,{variant:"tiny",className:"flex cursor-pointer select-none items-center gap-x-xs px-sm py-xs transition duration-300 hover:opacity-70",testId:"thread-collection-pill",children:[(0,o.jsx)(p.B,{unified:E.emoji,size:"tiny"}),(0,o.jsx)("div",{className:"line-clamp-1",children:E.title})]})})}),I&&!(null==E?void 0:E.title)&&(0,o.jsx)(U.Z,{testId:"add-to-collection",toolTip:H("addToCollection"),onClick:()=>V({entryUUID:R}),icon:S.r8,size:"small"}),(0,o.jsx)(y.Z,{show:I,onDelete:()=>X(R),onAddToCollection:()=>V({entryUUID:R}),onSwapCollection:()=>V({entryUUID:R}),onRemoveFromCollection:()=>B({entryUUID:R,oldCollectionUUID:O.uuid,callback:()=>{T===s.COLLECTION&&G.push("/library")}}),currentCollection:O,rwToken:w,type:T})]})]})})]})]})};var M=l(59939),z=l(71807);(n=s||(s={})).LIBRARY="library",n.COLLECTION="collection",n.DISCOVER="discover",n.SEARCH="search",n.INCOGNITO_SEARCH="incognitoSearch";let W=e=>{let{threads:t,fetchNextPage:l,hasNextPage:n=!1,showLoadingState:s=!1,showEmptyState:r=!1,type:i}=e,c=(null!=t?t:[]).map(M.gN),d=(0,a.useTranslations)("threads.main");return r&&0===c.length?(0,o.jsx)(P.ZP,{variant:"offset",className:"mt-md flex items-center justify-center rounded p-xl",children:"collection"===i?(0,o.jsx)(_.Z,{color:"light",children:d("threadsPlaceholder")}):(0,o.jsx)(_.Z,{color:"light",children:d("noThreads")})}):(0,o.jsx)(z.D,{fetchNextPage:l,hasNextPage:n,showLoadingState:s,itemsToRender:c,children:(0,o.jsx)(P.ZP,{className:"divide-y",children:c.map(e=>{var t;return(0,o.jsx)(O,{href:e.href,rwToken:e.rwToken,title:e.title,preview:e.preview,threadCount:e.threadCount,lastUpdated:e.lastUpdated,copilot:e.copilot,assistant:e.assistant,socialInfo:e.socialInfo,threadAccess:e.threadAccess,authorImage:e.authorImage,featuredImage:null!==(t=e.featuredImage)&&void 0!==t?t:null,showActionMenu:"discover"!==i,type:i,entryUUID:e.entryUUID,collection:e.collection},e.entryUUID)})})})}},44108:function(e,t,l){var n=l(97458),s=l(64194);l(52983);var o=l(25123),r=l(3011),a=l(28023);t.Z=e=>{let{textVariant:t="baseSemi",textColor:l="default",assistant:i}=e,{AssistantConfigs:c,Assistant:d}=(0,o.I)();return i&&i!=d.internet&&null!=c[i]?(0,n.jsx)(r.ZP,{children:(0,n.jsxs)(a.Z,{variant:t,color:l,className:"flex items-center gap-x-xs",children:[(0,n.jsx)(s.G,{size:"1x",icon:c[i].icon}),(0,n.jsx)("div",{children:c[i].text})]})}):null}},31237:function(e,t,l){var n=l(97458),s=l(64194),o=l(52983),r=l(50882),a=l(48121),i=l(9269),c=l(42970),d=l(3011),u=l(28023),m=l(72157),h=l(80370),x=l(51865),g=l.n(x);t.Z=e=>{let{size:t="medium",user:l,showEdit:x,onChange:f,anon:v,altText:p,defaultIcon:j=i.IL,showProBadge:y}=e,b="xs";"medium"===t?b="1x":"large"===t&&(b="2x");let w=(0,o.useCallback)(()=>{let e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=e=>{var t;let l=null===(t=e.target.files)||void 0===t?void 0:t[0];if(l){let e=new FileReader;e.onload=e=>{var t;f&&f(null===(t=e.target)||void 0===t?void 0:t.result)},e.readAsDataURL(l)}},e.click()},[f]);return(0,n.jsx)("div",{className:"relative",children:(0,n.jsxs)(d.ZP,{variant:"offsetPlus",className:g()("relative flex aspect-square shrink-0 items-center justify-center rounded-full",{"h-3 w-3":"tiny"===t,"h-5 w-5":"small"===t,"h-8 w-8":"medium"===t,"w-[80px]":"large"===t,"border-2 border-transparent ring-1 ring-super dark:ring-superDark":y}),children:[l&&!v?(0,n.jsx)("img",{alt:null!=p?p:"User avatar",className:"h-full w-full rounded-full object-cover",src:l}):(0,n.jsx)(u.Z,{color:"light",children:(0,n.jsx)(s.G,{size:b,icon:v?c.BC:j,fixedWidth:!0})}),x&&"small"!==t&&(0,n.jsx)("div",{className:"absolute bottom-0 right-0",children:(0,n.jsx)(m.Z,{ariaLabel:"Edit avatar",variant:l?"common":"primary",size:"small",pill:!0,icon:l?r.faPenToSquare:a.r8p,onClick:w})}),y&&(0,n.jsx)("div",{className:g()("absolute top-[100%] -mt-[6px] w-[24px] bg-offset p-[1.5px] dark:bg-offsetDark",{"opacity-0":"small"===t},{"-mt-[10px] w-lg":"large"===t}),style:{clipPath:"polygon(12% 0%, 100% 0, 100% 77%, 88% 100%, 0 100%, 0% 23%)"},children:(0,n.jsx)(h.Z,{variant:"pro",size:"small",className:"w-full"})})]})})}},10478:function(e,t,l){l.d(t,{l:function(){return r}});var n=l(83427),s=l(72898),o=l(61218);let r=()=>{var e;let t=(0,s.nO)(),l=async e=>{let{pageParam:l}=e;(!l||l<1)&&(l=1);let n=(l-1)*50;return await t.emitWithAck("list_user_collections",{limit:50,offset:n})},{data:r}=(0,n.N)({enabled:!!t,queryKey:o.Xt,refetchOnReconnect:"always",queryFn:e=>{let{pageParam:t=1}=e;return l({pageParam:t})},getNextPageParam:(e,t)=>{var l;return e&&(null===(l=e[0])||void 0===l?void 0:l.has_next_page)?t.length+1:void 0}});return{collections:null!==(e=null==r?void 0:r.pages[r.pages.length-1])&&void 0!==e?e:[]}}},20634:function(e,t,l){l.d(t,{k:function(){return s}});var n=l(1804);let s=()=>{let e=(0,n.useTranslations)("shared");return{yearsAgo:e("yearsAgo"),monthAgo:e("monthAgo"),monthsAgo:e("monthsAgo"),dayAgo:e("dayAgo"),daysAgo:e("daysAgo"),hourAgo:e("hourAgo"),hoursAgo:e("hoursAgo"),minutesAgo:e("minutesAgo"),minuteAgo:e("minuteAgo"),justNow:e("justNow")}}},11389:function(e,t,l){var n=l(97458);l(52983);var s=l(28023),o=l(84296);t.Z=e=>{let{message:t,...l}=e;return(0,n.jsx)(o.Z,{title:void 0,subtitle:void 0,...l,children:(0,n.jsx)(s.Z,{variant:"section-title",className:"pb-md text-center",children:t})})}},71263:function(e,t,l){var n=l(97458),s=l(95194),o=l(64194),r=l(51987);l(52983);var a=l(34969),i=l(28023);t.Z=e=>{let{timestamp:t,layoutType:l="right",textVariant:c="tiny",textColor:d="light",translations:u={yearsAgo:"years ago",monthsAgo:"months ago",monthAgo:"month ago",daysAgo:"days ago",dayAgo:"day ago",hoursAgo:"hours ago",hourAgo:"hour ago",minutesAgo:"minutes ago",minuteAgo:"minute ago",justNow:"Just now"},textBlockProps:m}=e;if(!t)return null;let h=r.DateTime.fromISO("".concat(t,"Z")),x=(e=>{var t,l,n,s,o;let a=r.DateTime.local().diff(e,["years","months","days","hours","minutes","seconds"]).toObject(),i=null!==(t=a.years)&&void 0!==t?t:0,c=null!==(l=a.months)&&void 0!==l?l:0,d=null!==(n=a.days)&&void 0!==n?n:0,m=null!==(s=a.hours)&&void 0!==s?s:0,h=null!==(o=a.minutes)&&void 0!==o?o:0,{yearsAgo:x,monthAgo:g,monthsAgo:f,daysAgo:v,dayAgo:p,hoursAgo:j,minutesAgo:y,hourAgo:b,minuteAgo:w,justNow:C}=u;return i>=1?"".concat(Math.round(i)," ").concat(x):1===c?"1 ".concat(g):c>=1?"".concat(Math.round(c)," ").concat(f):1===d?"1 ".concat(p):d>=1?"".concat(Math.round(d)," ").concat(v):1===m?"1 ".concat(b):m>=1?"".concat(Math.round(m)," ").concat(j):1===h?"1 ".concat(w):h>=1?"".concat(Math.round(h)," ").concat(y):C})(h),g=h.toLocaleString(r.DateTime.DATETIME_FULL);return x?null!==x&&(0,n.jsx)(a.Z,{tooltipText:g,tooltipLayout:l,asChild:!0,children:(0,n.jsxs)(i.Z,{variant:c,color:d,className:"gap-x-xs flex cursor-default items-center",...m,children:[(0,n.jsx)("span",{children:(0,n.jsx)(o.G,{size:"sm",icon:s.SZw})}),(0,n.jsx)("span",{className:"truncate",children:x})]})}):null}}}]);